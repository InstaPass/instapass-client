# Xcode
# Build, test, and archive an Xcode workspace on macOS.
# Add steps that install certificates, test, sign, and distribute an app, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/xcode

trigger:
- master

pool:
  vmImage: 'macos-latest'

jobs:
  - job: 'ios_build'
    steps:
    - task: ShellScript@2
      inputs:
        scriptPath: "./build_ios.sh"
  - job: 'watchos_build'
    steps:
    - task: ShellScript@2
      inputs:
        scriptPath: "./build_watchos.sh"
  - job: 'android_build'
    steps:
      - task: Gradle@2
        inputs:
          workingDirectory: './InstaPass-Android/'
          gradleWrapperFile: './InstaPass-Android/gradlew'
          gradleOptions: '-Xmx3072m'
          publishJUnitResults: false
          testResultsFiles: '**/TEST-*.xml'
          tasks: 'assembleDebug'